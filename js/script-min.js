function processGeolocation(e){e&&updateUrls(e.country.toLowerCase())}function easeInOut(e,t,r,c){return e/=c/2,1>e?r/2*e*e+t:(e-=1,-r/2*(e*(e-2)-1)+t)}function scrollTo(e,t,r){var c=e.scrollTop,s=t-c,l=20,a=function(t){t+=l;var o=easeInOut(t,c,s,r);e.scrollTop=o,r>t&&setTimeout(function(){a(t)},l)};a(0)}var stylesheet=document.createElement("link");stylesheet.href="/css/top.css",stylesheet.rel="stylesheet",stylesheet.type="text/css",stylesheet.media="all",document.getElementsByTagName("head")[0].appendChild(stylesheet);var createCookie=function(e,t,r){var c="";if(r){var s=new Date;s.setTime(s.getTime()+24*r*60*60*1e3),c="; expires="+s.toGMTString()}document.cookie=e+"="+t+c+"; path=/"},readCookie=function(e){for(var t=e+"=",r=document.cookie.split(";"),c=0;c<r.length;c++){for(var s=r[c];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return null},updateUrls=function(e){createCookie("country",e,7)},listing=document.getElementById("listing"),tracks=document.querySelectorAll(".show-track"),selectedArtwork=document.getElementById("selected-artwork"),selectedTrack=document.getElementById("selected-track"),selectedLink=document.getElementById("selected-link"),selectTrack=function(e){var t=e.getAttribute("data-src");selectedArtwork.src=t,selectedArtwork.className="",e.className+=" selected",selectedArtwork.alt=selectedTrack.title=selectedLink.title=selectedTrack.textContent=e.title,selectedTrack.href=selectedLink.href=e.getElementsByTagName("a")[0].href;for(var r=artworkSizes[artworkSizes.length-1],c=0;c<artworkSizes.length;c++)if(selectedArtwork.offsetWidth<=artworkSizes[c]){r=artworkSizes[c];break}var s=new Image;s.onload=function(){selectedArtwork.src=s.src,selectedArtwork.className="loaded"},s.src=t.replace("100x100",r+"x"+r),listing.scrollTop&&scrollTo(listing,0,500)},clickTrack=function(e){"TR"!==this.tagName&&e.preventDefault(),body.className="listing-open";var t=listing.querySelector("tr.selected");t&&(t.className=t.className.replace(" selected",""));var r=this.getAttribute("data-target-id");window.location.hash=r;var c=document.getElementById("track-"+r);c&&selectTrack(c)};if(window.location.hash.length>1){var target=document.getElementById("track-"+window.location.hash.substring(1));target&&(body.className="listing-open",selectTrack(target))}document.getElementById("close").addEventListener("click",function(){body.className=""},!1);for(var i=tracks.length-1;i>=0;i--)tracks[i].addEventListener("click",clickTrack,!0);var country=readCookie("country");country?updateUrls(country):loadScript("http://ipinfo.io/?callback=processGeolocation");