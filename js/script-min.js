function processGeolocation(e){e&&updateUrls(e.country.toLowerCase())}var stylesheet=document.createElement("link");stylesheet.href="/css/top.css",stylesheet.rel="stylesheet",stylesheet.type="text/css",stylesheet.media="all",document.getElementsByTagName("head")[0].appendChild(stylesheet);var createCookie=function(e,t,r){if(r){var o=new Date;o.setTime(o.getTime()+24*r*60*60*1e3);var a="; expires="+o.toGMTString()}else var a="";document.cookie=e+"="+t+a+"; path=/"},readCookie=function(e){for(var t=e+"=",r=document.cookie.split(";"),o=0;o<r.length;o++){for(var a=r[o];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null},eraseCookie=function(e){createCookie(e,"",-1)},updateUrls=function(e){createCookie("country",e,7)},country=readCookie("country");country?updateUrls(country):loadScript("http://ipinfo.io/?callback=processGeolocation"),document.getElementById("close").addEventListener("click",function(e){body.className=""},!1);for(var tracks=document.querySelectorAll(".show-track"),selectedArtwork=document.getElementById("selected-artwork"),selectTrack=function(e){e.className+=" selected";for(var t=e.getAttribute("data-src"),r=artworkSizes[artworkSizes.length-1],o=0;o<artworkSizes.length;o++)if(selectedArtwork.offsetWidth<=artworkSizes[o]){r=artworkSizes[o];break}var a=new Image;a.onload=function(){selectedArtwork.src=a.src,selectedArtwork.className="loaded"},a.src=t.replace("100x100",r+"x"+r)},i=tracks.length-1;i>=0;i--)tracks[i].addEventListener("click",function(e){e.preventDefault(),body.className="listing-open";var t=document.querySelector("tr.selected");t&&(t.className=t.className.replace(" selected",""));var r=this.getAttribute("data-target-id");window.location.hash=r;var o=document.getElementById("track-"+r);o&&selectTrack(o)},!1);if(window.location.hash.length>1){var target=document.getElementById("track-"+window.location.hash.substring(1));target&&(body.className="listing-open",selectTrack(target))}